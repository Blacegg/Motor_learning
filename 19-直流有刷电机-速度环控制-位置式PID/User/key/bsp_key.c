/**
 ******************************************************************************
 * @file    bsp_key.c
 * @author  fire
 * @version V1.0
 * @date    2015-xx-xx
 * @brief   ???????bsp?????????
 ******************************************************************************
 * @attention
 *
 * ?????:???  STM32 F103 ??????
 * ???    :http://www.firebbs.cn
 * ???    :http://firestm32.taobao.com
 *
 ******************************************************************************
 */

#include "./key/bsp_key.h"
/**
 * @brief  ????????????I/O??
 * @param  ??
 * @retval ??
 */
void Key_GPIO_Config(void)
{
  GPIO_InitTypeDef GPIO_InitStructure;

  /*????????GPIO??????*/
  KEY1_GPIO_CLK_ENABLE();
  KEY2_GPIO_CLK_ENABLE();

  /*???????????????*/
  GPIO_InitStructure.Mode = GPIO_MODE_INPUT;
  /*????????????????????*/
  GPIO_InitStructure.Pull = GPIO_NOPULL;

  /*??????????*/
  GPIO_InitStructure.Pin = KEY1_PIN;
  /*???????????????????*/
  HAL_GPIO_Init(KEY1_GPIO_PORT, &GPIO_InitStructure);

  /*??????????*/
  GPIO_InitStructure.Pin = KEY2_PIN;
  /*???????????????????*/
  HAL_GPIO_Init(KEY2_GPIO_PORT, &GPIO_InitStructure);
}

/**
 * @brief   ???????§Ñ???????
 * @param   ??????????¦Ë
 *		@arg GPIOx: x???????A...G??
 *		@arg GPIO_PIN ??????GPIO_PIN_x??x??????1...16??
 * @retval  ????????
 *		@arg KEY_ON:????????
 *		@arg KEY_OFF:?????????
 */
uint8_t Key_Scan(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin)
{
  /*???????§Ñ??????? */
  if (HAL_GPIO_ReadPin(GPIOx, GPIO_Pin) == KEY_ON)
  {
    /*?????????? */
    while (HAL_GPIO_ReadPin(GPIOx, GPIO_Pin) == KEY_ON)
      ;
    return KEY_ON;
  }
  else
    return KEY_OFF;
}
/*********************************************END OF FILE**********************/
